
# Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

|     Решение     |  Маршрутизация запросов |  Проверка аутентификации | Терминациия HTTPS |
|-----------------|-------------------------|--------------------------|-------------------|
|       Kong      |            +            |             +            |         +         |
|     Apigee      |            +            |             +            |         +         |
| AWS API Gateway |            +            |             +            |         +         |
|       Tyk       |            +            |             +            |         +         |
|   Nginx Plus    |            +            |             +            |         +         |

```Предложенные решения, такие как Kong, Apigee, AWS API Gateway, Tyk и Nginx Plus, являются популярными в индустрии и обеспечивают широкий набор возможностей для реализации API Gateway. Например, Kong является open-source и легко расширяемым с помощью плагинов, в то время как Apigee и AWS API Gateway предоставляют облачное решение с различными планами подписки и управления. Tyk также является open-source и может быть самостоятельно развернут, а Nginx Plus предоставляет мощные функции веб-сервера и прокси.```

Выбор Nginx Plus в качестве решения для API Gateway имеет несколько обоснованных причин:

**1. Маршрутизация запросов:** Nginx Plus обладает мощным механизмом маршрутизации, который позволяет эффективно направлять запросы к нужным сервисам на основе настраиваемых правил. Это обеспечивает гибкость и масштабируемость в управлении трафиком.

**2. Проверка аутентификации:** Nginx Plus поддерживает различные методы аутентификации, такие как базовая аутентификация, аутентификация с использованием JWT, проверка токенов и другие. Это позволяет обеспечить безопасность и контроль доступа к API.

**3. Терминация HTTPS:** Nginx Plus предоставляет возможность терминации SSL/TLS, что позволяет расшифровывать зашифрованный трафик на стороне API Gateway и передавать его внутрь сети в незашифрованном виде. Это упрощает управление сертификатами и обеспечивает безопасность трафика между клиентами и API.

**4. Производительность и масштабируемость:** Nginx Plus является высокопроизводительным решением, способным обрабатывать большие объемы трафика и масштабироваться горизонтально при необходимости. Это важно для обеспечения отзывчивости и доступности API.

**5. Поддержка и экосистема:** Nginx Plus обладает широкой поддержкой и активным сообществом пользователей, что обеспечивает доступ к документации, обучающим материалам и экспертной поддержке. Кроме того, Nginx Plus интегрируется с другими инструментами и сервисами, такими как мониторинг и журналирование.


## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

| Брокер      | Поддержка кластеризации | Хранение сообщений на диске | Высокая скорость работы | Поддержка форматов сообщений | Разделение прав доступа | Простота эксплуатации |
|-------------|-------------------------|-----------------------------|--------------------------|------------------------------|-------------------------|------------------------|
| Kafka       | +                       | +                           | +                        | JSON, Avro, Protobuf       | +                       | Нет                    |
| RabbitMQ    | +                       | +                           | +                        | JSON, XML, Protobuf, другие| +                       | +                      |
| ActiveMQ    | +                       | +                           | +                        | XML, JSON, Protobuf       | +                       | +                      |
| NATS        | +                       | +                           | +                        | JSON                       | +                       | +                      |
| Redis       | +                       | +                           | +                        | Любой                      | +                       | +                      |

Обоснование выбора:

Выбор Kafka в качестве решения для брокера сообщений:

**1. Поддержка кластеризации:** Kafka обеспечивает высокую доступность и надежность благодаря своей архитектуре, позволяющей создавать кластеры брокеров сообщений.

**2. Хранение сообщений на диске:** Kafka хранит сообщения на диске в процессе доставки, обеспечивая надежную доставку сообщений и возможность восстановления после сбоев.

**3. Высокая скорость работы:** Kafka известен своей высокой производительностью и способностью обрабатывать огромные объемы сообщений в реальном времени.

**4. Поддержка различных форматов сообщений:** Kafka поддерживает различные форматы сообщений, включая JSON, Avro, Protobuf и другие, что обеспечивает гибкость в работе с данными.

**5. Разделение прав доступа:** Kafka предоставляет механизмы для разделения прав доступа и управления доступом к различным потокам сообщений, обеспечивая безопасность данных.

**6. Простота эксплуатации:** В то время как Kafka может потребовать некоторых усилий для настройки и управления, его широко распространенная архитектура и обширное сообщество пользователей делают его относительно простым в использовании и обслуживании.


В целом, Kafka представляет собой мощное и гибкое решение для обеспечения надежной и масштабируемой платформы обмена сообщениями, которая соответствует всем вашим требованиям.





